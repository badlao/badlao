version: "3.8"

services:
  strapi-staging:
    build:
      context: .
      dockerfile: Dockerfile.staging
    container_name: strapi-staging

    # Load staging environment variables
    env_file:
      - .env

    working_dir: /srv/app

    # No bind mounts in staging â†’ clean image-based deployment
    # Add volumes later if you want persistent uploads
    # volumes:
    #   - ./public/uploads:/srv/app/public/uploads

    ports:
      - "1341:1341"   # staging port (no conflicts)

    restart: unless-stopped
